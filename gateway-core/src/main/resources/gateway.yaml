port: 9000
appName: advanced-gateway
routes:
  - id: local-api
    path: /local
    lb: smooth_wrr
    upstreams:
      - url: http://localhost:8081
        weight: 5
      - url: http://localhost:8082
        weight: 1

  - id: httpbin
    path: /json
    lb: random
    upstreams:
      - url: http://httpbin.org
        weight: 1
      - url: http://httpbingo.org
        weight: 1


health:
  failureThreshold: 3
  openCooldownMs: 8000
  halfOpenMaxCalls: 1
  successThresholdToClose: 2

retry:
  maxRetries: 2
  idempotentOnly: true
  retryOnStatus: [502, 503, 504]
  backoffMs: 50

